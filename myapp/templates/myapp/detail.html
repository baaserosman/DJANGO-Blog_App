{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load static %}

{% block content %}

<div class="container d-flex justify-content-center mt-5">
  <div class="container detail-container p-4">
    <div>
      <h2 class="mb-3 text-center">Post Detail</h2>
      <br>
    </div>
          {% if post.image %}
          <img src="{{ post.image.url }}" class="card-img-top w-100" alt="image">

          {% else %}
          
          <img src="media/django.png" class="card-img-top w-100  " alt="image">
        {% endif %}


    <div class="card-body">
      <h5 class="card-title">{{post.title}}</h5>
      <p class="card-text" >{{post.content}}</p>
      <div>
          <span><i class="far fa-comment-alt ml-2"></i></i> {{ object.comment_count }}</span>
                <span><i class="fas fa-eye ml-2"></i> {{ object.view_count }}</span>
                <span><i class="far fa-heart ml-2"></i> {{ object.like_count }}</span>
                <span class="float-right"> <small>Posted {{ object.publish_date | timesince }} ago.</small> </span>
      </div>
      <hr>
      <div>
            <h4>Enjoy this post? Give it a LIKE!!</h4>
      </div>
      <div>
          <form action="{% url 'like' post.slug %}" method="POST">
                {% csrf_token %}
                <input type="hidden" name="post">
                <input type="hidden" name="user">
                
                {% if post.like_count == 0  %}
                  <button class="btn btn-outline-none" type="submit"><i class="far fa-regular fa-heart fa-lg"></i></button>
                {% else %}
                  <button class="btn btn-outline-none text-danger" type="submit"><i class="far fa-solid fa-heart fa-lg"></i></button>
                {% endif %}                
          </form>
          <hr>
          <h4>Leave a comment below</h4>
          <form action="" method="POST">
                {% csrf_token %}
                {{ form | crispy }}
                <button class="btn btn-info btn-sm mt-2">SEND</button>
            </form>
            <hr>


      </div>
            
      <div class="text-center">
      {% if user.id == post.author.id %}
        <a href="{% url 'post_update' post.slug %}" class="btn btn-info m-2 w-25">Edit</a>
        <a href="{% url 'post_delete' post.slug %}" class="btn btn-danger m-2 w-25">Delete</a>
      {% else %}      
        <a href="{% url 'home'  %}" class="btn w-50 btn-danger m-2">Back</a>
      </div>
      
      {% endif %}
        
      
    </div>
  </div>
</div>

    
{% endblock content %}
    